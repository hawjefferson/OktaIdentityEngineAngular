{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { OKTA_AUTH } from '@okta/okta-angular';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@okta/okta-auth-js\";\n\nfunction HomeComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.error, \"\\n\");\n  }\n}\n\nfunction HomeComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2, \"If you\\u2018re viewing this page then you have successfully started this Angular application.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \"This example shows you how to use the \");\n    i0.ɵɵelementStart(5, \"a\", 4);\n    i0.ɵɵtext(6, \"Okta Angular Library\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \" to add the \");\n    i0.ɵɵelementStart(8, \"a\", 5);\n    i0.ɵɵtext(9, \"PKCE Flow\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \" to your application.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\");\n    i0.ɵɵtext(12, \"When you click the login button below, you will be redirected to the login page on your Okta org. After you authenticate, you will be returned to this application with an ID Token and Access Token. These tokens will be stored in local storage and can be retrieved at a later time.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function HomeComponent_div_3_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.login());\n    });\n    i0.ɵɵtext(14, \"Login\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction HomeComponent_div_4_li_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 10);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const example_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"href\", example_r6.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(example_r6.label);\n  }\n}\n\nfunction HomeComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4, \" You have successfully authenticated against your Okta org, and have been redirected back to this application. You now have an ID Token and access token in local storage. Visit the \");\n    i0.ɵɵelementStart(5, \"a\", 7);\n    i0.ɵɵtext(6, \"My Profile\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \" page to take a look inside the ID Token. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"h3\");\n    i0.ɵɵtext(9, \"Next Steps\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\");\n    i0.ɵɵtext(11, \" Currently this application is a stand-alone front end application. At this point you can use the access token to authenticate yourself against resource servers that you control. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\");\n    i0.ɵɵtext(13, \" This sample is designed to work with one of our resource server examples. To see access token authentication in action, please download one of these resource server examples: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"ul\");\n    i0.ɵɵtemplate(15, HomeComponent_div_4_li_15_Template, 3, 2, \"li\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"p\");\n    i0.ɵɵtext(17, \"Once you have downloaded and started the example resource server, you can visit the \");\n    i0.ɵɵelementStart(18, \"a\", 9);\n    i0.ɵɵtext(19, \"My Messages\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \" page to see the authentication process in action.\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Welcome back, \", ctx_r2.userName, \"!\");\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.resourceServerExamples);\n  }\n}\n\nexport let HomeComponent = /*#__PURE__*/(() => {\n  class HomeComponent {\n    constructor(oktaAuth) {\n      this.oktaAuth = oktaAuth;\n      this.userName = '';\n      this.isAuthenticated = false;\n      this.error = null;\n      this.resourceServerExamples = [{\n        label: 'Node/Express Resource Server Example',\n        url: 'https://github.com/okta/samples-nodejs-express-4/tree/master/resource-server'\n      }, {\n        label: 'Java/Spring MVC Resource Server Example',\n        url: 'https://github.com/okta/samples-java-spring-mvc/tree/master/resource-server'\n      }];\n    }\n\n    login() {\n      return __awaiter(this, void 0, void 0, function* () {\n        try {\n          yield this.oktaAuth.signInWithRedirect({\n            originalUri: '/'\n          });\n        } catch (err) {\n          console.error(err);\n          this.error = err;\n        }\n      });\n    }\n\n    ngOnInit() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.isAuthenticated = yield this.oktaAuth.isAuthenticated();\n\n        if (this.isAuthenticated) {\n          const userClaims = yield this.oktaAuth.getUser();\n          this.userName = userClaims.name;\n        }\n      });\n    }\n\n  }\n\n  HomeComponent.ɵfac = function HomeComponent_Factory(t) {\n    return new (t || HomeComponent)(i0.ɵɵdirectiveInject(OKTA_AUTH));\n  };\n\n  HomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeComponent,\n    selectors: [[\"app-home\"]],\n    decls: 5,\n    vars: 3,\n    consts: [[\"class\", \"error\", 4, \"ngIf\"], [1, \"ui\", \"header\"], [4, \"ngIf\"], [1, \"error\"], [\"href\", \"https://github.com/okta/okta-angular/tree/master\"], [\"href\", \"https://developer.okta.com/docs/guides/implement-auth-code-pkce\"], [\"id\", \"login-button\", \"role\", \"button\", 1, \"ui\", \"primary\", \"button\", 3, \"click\"], [\"href\", \"/profile\"], [4, \"ngFor\", \"ngForOf\"], [\"href\", \"/messages\"], [3, \"href\"]],\n    template: function HomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, HomeComponent_div_0_Template, 2, 1, \"div\", 0);\n        i0.ɵɵelementStart(1, \"h1\", 1);\n        i0.ɵɵtext(2, \"PKCE Flow w/ Okta Hosted Login Page\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, HomeComponent_div_3_Template, 15, 0, \"div\", 2);\n        i0.ɵɵtemplate(4, HomeComponent_div_4_Template, 21, 2, \"div\", 2);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.error);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isAuthenticated);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated && ctx.userName);\n      }\n    },\n    dependencies: [i1.NgForOf, i1.NgIf],\n    styles: [\".error[_ngcontent-%COMP%]{color:red}\"]\n  });\n  return HomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}