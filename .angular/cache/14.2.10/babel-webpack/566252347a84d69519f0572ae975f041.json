{"ast":null,"code":"import _regeneratorRuntime from \"/Users/jeffersonhaw/Documents/CebPacAngular/samples-js-angular/okta-hosted-login/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/jeffersonhaw/Documents/CebPacAngular/samples-js-angular/okta-hosted-login/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/Users/jeffersonhaw/Documents/CebPacAngular/samples-js-angular/okta-hosted-login/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/jeffersonhaw/Documents/CebPacAngular/samples-js-angular/okta-hosted-login/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/jeffersonhaw/Documents/CebPacAngular/samples-js-angular/okta-hosted-login/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/jeffersonhaw/Documents/CebPacAngular/samples-js-angular/okta-hosted-login/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/jeffersonhaw/Documents/CebPacAngular/samples-js-angular/okta-hosted-login/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\n\n/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * \n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport { parseOAuthResponseFromUrl } from '../oidc/parseFromUrl.js';\nimport { AuthStateManager } from './AuthStateManager.js';\nimport { ServiceManager } from './ServiceManager/browser.js';\n\nfunction mixinCore(Base) {\n  return /*#__PURE__*/function (_Base) {\n    _inherits(OktaAuthCore, _Base);\n\n    var _super = _createSuper(OktaAuthCore);\n\n    function OktaAuthCore() {\n      var _this;\n\n      _classCallCheck(this, OktaAuthCore);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n      _this.authStateManager = new AuthStateManager(_assertThisInitialized(_this));\n      _this.serviceManager = new ServiceManager(_assertThisInitialized(_this), _this.options.services);\n      return _this;\n    }\n\n    _createClass(OktaAuthCore, [{\n      key: \"start\",\n      value: function () {\n        var _start = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.serviceManager.start();\n\n              case 2:\n                this.tokenManager.start();\n\n                if (this.token.isLoginRedirect()) {\n                  _context.next = 6;\n                  break;\n                }\n\n                _context.next = 6;\n                return this.authStateManager.updateAuthState();\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee, this);\n        }));\n\n        function start() {\n          return _start.apply(this, arguments);\n        }\n\n        return start;\n      }()\n    }, {\n      key: \"stop\",\n      value: function () {\n        var _stop = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n          return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n            while (1) switch (_context2.prev = _context2.next) {\n              case 0:\n                this.tokenManager.stop();\n                _context2.next = 3;\n                return this.serviceManager.stop();\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }, _callee2, this);\n        }));\n\n        function stop() {\n          return _stop.apply(this, arguments);\n        }\n\n        return stop;\n      }()\n    }, {\n      key: \"handleLoginRedirect\",\n      value: function () {\n        var _handleLoginRedirect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(tokens, originalUri) {\n          var state, oAuthResponse, restoreOriginalUri;\n          return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n            while (1) switch (_context3.prev = _context3.next) {\n              case 0:\n                state = this.options.state;\n\n                if (!tokens) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                this.tokenManager.setTokens(tokens);\n                originalUri = originalUri || this.getOriginalUri(this.options.state);\n                _context3.next = 25;\n                break;\n\n              case 6:\n                if (!this.isLoginRedirect()) {\n                  _context3.next = 24;\n                  break;\n                }\n\n                _context3.prev = 7;\n                _context3.next = 10;\n                return parseOAuthResponseFromUrl(this, {});\n\n              case 10:\n                oAuthResponse = _context3.sent;\n                state = oAuthResponse.state;\n                originalUri = originalUri || this.getOriginalUri(state);\n                _context3.next = 15;\n                return this.storeTokensFromRedirect();\n\n              case 15:\n                _context3.next = 22;\n                break;\n\n              case 17:\n                _context3.prev = 17;\n                _context3.t0 = _context3[\"catch\"](7);\n                _context3.next = 21;\n                return this.authStateManager.updateAuthState();\n\n              case 21:\n                throw _context3.t0;\n\n              case 22:\n                _context3.next = 25;\n                break;\n\n              case 24:\n                return _context3.abrupt(\"return\");\n\n              case 25:\n                _context3.next = 27;\n                return this.authStateManager.updateAuthState();\n\n              case 27:\n                this.removeOriginalUri(state);\n                restoreOriginalUri = this.options.restoreOriginalUri;\n\n                if (!restoreOriginalUri) {\n                  _context3.next = 34;\n                  break;\n                }\n\n                _context3.next = 32;\n                return restoreOriginalUri(this, originalUri);\n\n              case 32:\n                _context3.next = 35;\n                break;\n\n              case 34:\n                if (originalUri) {\n                  window.location.replace(originalUri);\n                }\n\n              case 35:\n              case \"end\":\n                return _context3.stop();\n            }\n          }, _callee3, this, [[7, 17]]);\n        }));\n\n        function handleLoginRedirect(_x, _x2) {\n          return _handleLoginRedirect.apply(this, arguments);\n        }\n\n        return handleLoginRedirect;\n      }()\n    }]);\n\n    return OktaAuthCore;\n  }(Base);\n}\n\nexport { mixinCore }; //# sourceMappingURL=mixin.js.map","map":null,"metadata":{},"sourceType":"module"}